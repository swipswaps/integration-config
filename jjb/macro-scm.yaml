# Wrapper around Zuul Cloner
#
# Fallback to the branch ZUUL_BRANCH.
# Repositories are cloned under /src/
#
# Example usage:
#
#    builders:
#     - zuul-cloner:
#         projects: >
#             mediawiki/core
#             mediawiki/vendor
#
- builder:
    name: zuul-cloner
    builders:
        - shell: |
            zuul-cloner --version
            zuul-cloner \
                --color \
                --verbose \
                --map /srv/deployment/integration/slave-scripts/etc/zuul-clonemap.yaml \
                --workspace src \
                --cache-dir /srv/git \
                https://gerrit.wikimedia.org/r/p \
                {projects}
